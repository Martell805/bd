bd.public> DROP SCHEMA public CASCADE
[2023-09-27 16:30:54] completed in 2 ms
bd.public> CREATE SCHEMA public
[2023-09-27 16:30:54] completed in 2 ms
bd.public> CREATE TABLE customers (
               id INTEGER PRIMARY KEY UNIQUE,
               name VARCHAR(255) NOT NULL,
               phone_number VARCHAR(255),
               email VARCHAR(255)
           )
[2023-09-27 16:30:54] completed in 10 ms
bd.public> CREATE TABLE notes (
               id INTEGER PRIMARY KEY UNIQUE,
               customer_id INTEGER NOT NULL REFERENCES customers (id),
               content TEXT NOT NULL
           )
[2023-09-27 16:30:54] completed in 10 ms
bd.public> CREATE TABLE orders (
               id INTEGER PRIMARY KEY UNIQUE,
               customer_id INTEGER NOT NULL REFERENCES customers (id),
               date_created DATE NOT NULL,
               description TEXT NOT NULL
           )
[2023-09-27 16:30:54] completed in 11 ms
bd.public> CREATE TABLE tses (
               id INTEGER PRIMARY KEY UNIQUE,
               order_id INTEGER NOT NULL REFERENCES orders (id),
               date_created DATE NOT NULL,
               description TEXT NOT NULL
           )
[2023-09-27 16:30:54] completed in 9 ms
bd.public> CREATE TABLE teams (
               id INTEGER PRIMARY KEY UNIQUE,
               leader_id INTEGER,
               tses_done INTEGER NOT NULL DEFAULT 0,
               description TEXT NOT NULL,
               ts_id INTEGER REFERENCES tses (id)
           )
[2023-09-27 16:30:54] completed in 9 ms
bd.public> CREATE TABLE employees (
               id INTEGER PRIMARY KEY UNIQUE,
               firstname VARCHAR(255) NOT NULL,
               middlename VARCHAR(255) NOT NULL,
               lastname VARCHAR(255) NOT NULL,
               team_id INTEGER REFERENCES teams (id),
               salary INTEGER NOT NULL
           )
[2023-09-27 16:30:54] completed in 9 ms
bd.public> ALTER TABLE teams ADD FOREIGN KEY (leader_id) REFERENCES employees (id)
[2023-09-27 16:30:54] completed in 3 ms
bd.public> CREATE TABLE specialisations (
               id INTEGER PRIMARY KEY UNIQUE,
               title VARCHAR(255) NOT NULL
           )
[2023-09-27 16:30:54] completed in 6 ms
bd.public> CREATE TABLE employees_specialisations (
               employees_id INTEGER REFERENCES employees (id),
               specialisations_id INTEGER REFERENCES specialisations (id),
               PRIMARY KEY (employees_id, specialisations_id)
           )
[2023-09-27 16:30:54] completed in 7 ms
bd.public> DROP SCHEMA public CASCADE
[2023-09-27 18:28:22] [00000] удаление распространяется на ещё 8 объектов
[2023-09-27 18:28:22] completed in 26 ms
bd.public> CREATE SCHEMA public
[2023-09-27 18:28:22] completed in 1 ms
bd.public> CREATE TABLE customers (
               id INTEGER PRIMARY KEY UNIQUE,
               name VARCHAR(255) NOT NULL,
               phone_number VARCHAR(255),
               email VARCHAR(255)
           )
[2023-09-27 18:28:22] completed in 10 ms
bd.public> CREATE TABLE notes (
               id INTEGER PRIMARY KEY UNIQUE,
               customer_id INTEGER NOT NULL REFERENCES customers (id),
               content TEXT NOT NULL
           )
[2023-09-27 18:28:22] completed in 11 ms
bd.public> CREATE TABLE orders (
               id INTEGER PRIMARY KEY UNIQUE,
               customer_id INTEGER NOT NULL REFERENCES customers (id),
               date_created DATE NOT NULL,
               description TEXT NOT NULL
           )
[2023-09-27 18:28:22] completed in 10 ms
bd.public> CREATE TABLE tses (
               id INTEGER PRIMARY KEY UNIQUE,
               order_id INTEGER NOT NULL REFERENCES orders (id),
               date_created DATE NOT NULL,
               description TEXT NOT NULL
           )
[2023-09-27 18:28:22] completed in 11 ms
bd.public> CREATE TABLE teams (
               id INTEGER PRIMARY KEY UNIQUE,
               leader_id INTEGER,
               tses_done INTEGER NOT NULL DEFAULT 0,
               description TEXT NOT NULL,
               ts_id INTEGER REFERENCES tses (id)
           )
[2023-09-27 18:28:22] completed in 11 ms
bd.public> CREATE TABLE employees (
               id INTEGER PRIMARY KEY UNIQUE,
               firstname VARCHAR(255) NOT NULL,
               middlename VARCHAR(255) NOT NULL,
               lastname VARCHAR(255) NOT NULL,
               team_id INTEGER REFERENCES teams (id),
               salary INTEGER NOT NULL
           )
[2023-09-27 18:28:22] completed in 9 ms
bd.public> ALTER TABLE teams ADD FOREIGN KEY (leader_id) REFERENCES employees (id)
[2023-09-27 18:28:22] completed in 4 ms
bd.public> CREATE TABLE specialisations (
               id INTEGER PRIMARY KEY UNIQUE,
               title VARCHAR(255) NOT NULL
           )
[2023-09-27 18:28:22] completed in 6 ms
bd.public> CREATE TABLE employees_specialisations (
               employees_id INTEGER REFERENCES employees (id),
               specialisations_id INTEGER REFERENCES specialisations (id),
               PRIMARY KEY (employees_id, specialisations_id)
           )
[2023-09-27 18:28:22] completed in 6 ms
